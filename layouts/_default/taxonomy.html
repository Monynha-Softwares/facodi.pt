{{ define "main" }}
<section class="facodi-section facodi-section--taxonomy py-5">
  <div class="container-lg">
    <header class="facodi-section__header text-center mb-5">
      <span class="facodi-section__eyebrow text-uppercase text-muted" data-i18n="taxonomy.termEyebrow">{{ partial "facodi/i18n.html" (dict "key" "taxonomy.termEyebrow") }}</span>
      {{ $termDict := dict "Term" .Data.Term "Name" .Title }}
      <h1
        class="section-title mb-3"
        data-i18n="taxonomy.termTitle"
        data-i18n-html="true"
        data-i18n-vars='{{ $termDict | jsonify }}'
      >
        {{ partial "facodi/i18n.html" (dict "key" "taxonomy.termTitle" "vars" $termDict) | safeHTML }}
      </h1>
      {{ with .Data.Term | humanize }}<p class="lead text-muted" data-i18n="taxonomy.termIntro" data-i18n-vars='{{ dict "Term" . | jsonify }}'>{{ partial "facodi/i18n.html" (dict "key" "taxonomy.termIntro" "vars" (dict "Term" .)) }}</p>{{ end }}
    </header>
    {{ $collection := .Pages }}
    {{ $paginator := .Paginate $collection }}
    {{ $pages := $paginator.Pages }}
    {{ if not (len $pages) }}
      <div class="alert alert-info shadow-sm" data-i18n="taxonomy.noEntries">{{ partial "facodi/i18n.html" (dict "key" "taxonomy.noEntries") }}</div>
    {{ else }}
      <div class="row g-4">
        {{ range $pages }}
          <article class="col-md-6 col-lg-4">
            <div class="facodi-card h-100">
              <div class="facodi-card__body">
                <h2 class="h4 facodi-card__title"><a class="facodi-card__link" href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
                {{ with .Summary }}<p class="text-muted">{{ . | plainify }}</p>{{ end }}
              </div>
              <footer class="facodi-card__footer">
                {{ $tags := .Params.tags }}
                {{ if $tags }}
                  <div class="facodi-tag-list">
                    {{ range $tags }}<span class="badge bg-light text-muted">{{ . }}</span>{{ end }}
                  </div>
                {{ end }}
                <a class="facodi-card__cta" href="{{ .RelPermalink }}" data-i18n="taxonomy.viewEntry">{{ partial "facodi/i18n.html" (dict "key" "taxonomy.viewEntry") }}</a>
              </footer>
            </div>
          </article>
        {{ end }}
      </div>
      {{ if gt .Paginator.TotalPages 1 }}
        <nav class="facodi-pagination" aria-label="{{ partial "facodi/i18n.html" (dict "key" "taxonomy.pagination") }}" data-i18n="taxonomy.pagination" data-i18n-attr="aria-label">
          {{ template "_internal/pagination.html" . }}
        </nav>
      {{ end }}
    {{ end }}
  </div>
</section>
{{ end }}
