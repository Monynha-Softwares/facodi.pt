{{ define "main" }}
<section class="section container py-5">
  <div class="row justify-content-center mb-5">
    <div class="col-lg-8 text-center">
      <h1 class="mb-3">{{ .Title }}</h1>
      {{ with .Params.lead }}
      <p class="lead">{{ . }}</p>
      {{ end }}
      <div class="content">{{ .Content }}</div>
    </div>
  </div>
  <div class="row g-4">
    {{ $courses := sort .Sections "Title" }}
    {{ if not (len $courses) }}
    <div class="col-12">
      <div class="alert alert-warning" role="alert">{{ partial "utils/translate" (dict "Key" "catalog.noCourses") }}</div>
    </div>
    {{ end }}
    {{ range $courses }}
    {{ $params := .Params }}
    <div class="col-md-6">
      <div class="card h-100 shadow-sm border-0">
        <div class="card-body d-flex flex-column">
          <div class="d-flex align-items-center justify-content-between mb-3">
            <span class="badge bg-primary-subtle text-primary fw-semibold">{{ $params.code }}</span>
          {{ with $params.plan_version }}
          <span class="text-muted small">{{ partial "utils/translate" (dict "Key" "course.planVersion" "Vars" (dict "Version" .)) }}</span>
          {{ end }}
          </div>
          <h2 class="h4">{{ .Title }}</h2>
          {{ with $params.summary }}
          <p class="text-muted">{{ . }}</p>
          {{ else }}
          {{ with .Summary }}<p class="text-muted">{{ . }}</p>{{ end }}
          {{ end }}
          <dl class="row small text-muted mb-4">
            <dt class="col-5">{{ partial "utils/translate" (dict "Key" "course.degreeLabel") }}</dt>
            <dd class="col-7">{{ $params.degree | default "--" }}</dd>
            <dt class="col-5">{{ partial "utils/translate" (dict "Key" "course.totalEctsLabel") }}</dt>
            <dd class="col-7">{{ $params.ects_total | default "--" }}</dd>
            <dt class="col-5">{{ partial "utils/translate" (dict "Key" "course.durationLabel") }}</dt>
            <dd class="col-7">
              {{ with $params.duration_semesters }}
                {{ partial "utils/translate" (dict "Key" "course.durationSemesters" "Count" .) }}
              {{ else }}
                --
              {{ end }}
            </dd>
          </dl>
          <div class="mt-auto">
            <a class="btn btn-outline-primary w-100" href="{{ .RelPermalink }}">{{ partial "utils/translate" (dict "Key" "catalog.viewCurriculum") }}</a>
          </div>
        </div>
      </div>
    </div>
    {{ end }}
  </div>
</section>
{{ end }}
