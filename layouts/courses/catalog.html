{{ define "main" }}
<section class="section container py-5">
  <div class="row justify-content-center mb-5">
    <div class="col-lg-8 text-center">
      <h1 class="mb-3" data-i18n="catalog.title">{{ .Title }}</h1>
      {{ with .Params.lead }}
      <p class="lead" data-i18n="catalog.lead">{{ . }}</p>
      {{ end }}
      <div class="content">{{ .Content }}</div>
    </div>
  </div>
  <div class="row g-4">
    {{ $courses := sort .Sections "Title" }}
    {{ if not (len $courses) }}
    <div class="col-12">
      <div class="alert alert-warning" role="alert" data-i18n="catalog.empty">
        Ainda não temos cursos publicados por aqui. Chama a comunidade e vamos catalogar juntes!
      </div>
    </div>
    {{ end }}
    {{ range $courses }}
    {{ $params := .Params }}
    <div class="col-md-6">
      <div class="card h-100 shadow-sm border-0">
        <div class="card-body d-flex flex-column">
          <div class="d-flex align-items-center justify-content-between mb-3">
            <span class="badge bg-primary-subtle text-primary fw-semibold">{{ $params.code }}</span>
            {{ with $params.plan_version }}
            <span class="text-muted small" data-i18n="catalog.plan" data-i18n-vars='{{ dict "value" . | jsonify }}'>Plano {{ . }}</span>
            {{ end }}
          </div>
          <h2 class="h4">{{ .Title }}</h2>
          {{ with $params.summary }}
          <p class="text-muted">{{ . }}</p>
          {{ else }}
          {{ with .Summary }}<p class="text-muted">{{ . }}</p>{{ end }}
          {{ end }}
          <dl class="row small text-muted mb-4">
            <dt class="col-5" data-i18n="catalog.degreeLabel">Grau</dt>
            <dd class="col-7">{{ $params.degree | default "--" }}</dd>
            <dt class="col-5" data-i18n="catalog.ectsLabel">ECTS</dt>
            <dd class="col-7">{{ $params.ects_total | default "--" }}</dd>
            <dt class="col-5" data-i18n="catalog.durationLabel">Duração</dt>
            <dd class="col-7" data-i18n="catalog.durationValue" data-i18n-vars='{{ dict "value" ($params.duration_semesters | default "--") | jsonify }}'>{{ $params.duration_semesters | default "--" }} semestres</dd>
          </dl>
          <div class="mt-auto">
            <a class="btn btn-outline-primary w-100" href="{{ .RelPermalink }}" data-i18n="catalog.open">Ver currículo completo</a>
          </div>
        </div>
      </div>
    </div>
    {{ end }}
  </div>
</section>
{{ end }}
