{{ if site.Params.doks.alert -}}
  {{ partial "header/alert.html" . }}
{{ end -}}

{{ if site.Params.doks.navbarSticky -}}
<div class="sticky-top">
{{ end -}}

{{ if site.Params.doks.headerBar -}}
<div class="header-bar"></div>
{{ end -}}

{{ $localeData := site.Data.i18n.locales }}
{{ $localeDefault := cond $localeData (index $localeData "default") "pt" }}
{{ $localeOptions := slice }}
{{ if $localeData }}
  {{ with index $localeData "options" }}
    {{ $localeOptions = . }}
  {{ end }}
{{ end }}
<header class="navbar navbar-expand-lg facodi-navbar">
  {{ with site.Params.doks.containerBreakpoint -}}
    <div class="container-{{ . }} facodi-navbar__inner">
  {{ else -}}
    <div class="container facodi-navbar__inner">
  {{ end -}}

    <!-- Site title -->
    <a class="navbar-brand facodi-navbar__brand" href="{{ relLangURL "" }}">{{ .Site.Title }}</a>

    <!-- Main navigation button -->
    <button class="facodi-navbar__toggle d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavMain" aria-controls="offcanvasNavMain" data-i18n-attr="aria-label" data-i18n-key="nav.menuToggle">
      <span class="visually-hidden" data-i18n-key="nav.menuToggle">Abrir menu principal</span>
      <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <line x1="4" y1="8" x2="20" y2="8"></line>
        <line x1="4" y1="16" x2="20" y2="16"></line>
      </svg>
    </button>

    <!-- Main navigation -->
    <div class="offcanvas offcanvas-end h-auto" tabindex="-1" id="offcanvasNavMain" aria-labelledby="offcanvasNavMainLabel">
      {{ if site.Params.doks.headerBar -}}
        <div class="header-bar d-lg-none"></div>
      {{ end -}}
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasNavMainLabel">{{ site.Title }}</h5>
        <button type="button" class="btn btn-link nav-link p-0 ms-auto" data-bs-dismiss="offcanvas" data-i18n-attr="aria-label" data-i18n-key="nav.menuClose">
          <span class="visually-hidden" data-i18n-key="nav.menuClose">Fechar menu</span>
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M18 6l-12 12"></path>
            <path d="M6 6l12 12"></path>
         </svg>
        </button>
      </div>
      <!--
      <div class="offcanvas-header">
        <h5 class="offcanvas-title fw-bold" id="offcanvasNavMainLabel">{{ .Site.Params.Title }}</h5>
        <button class="btn btn-link nav-link ms-auto" type="button" data-bs-dismiss="offcanvas" aria-label="Close menu">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M18 6l-12 12"></path>
            <path d="M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      -->
      <div class="offcanvas-body facodi-navbar__body d-flex flex-column flex-lg-row align-items-lg-center gap-lg-4">
        <ul class="navbar-nav facodi-navbar__links flex-column flex-lg-row align-items-lg-center gap-2 gap-lg-4 mb-4 mb-lg-0">
          {{- $current := . -}}
          {{- $section := $current.Section -}}
          {{ range .Site.Menus.main -}}
            {{- $active := or ($current.IsMenuCurrent "main" .) ($current.HasMenuCurrent "main" .) -}}
            {{- $active = or $active (eq .Name $current.Title) -}}
            {{- $active = or $active (eq .Name ($section | humanize)) -}}
            {{- $active = or $active (and (eq .Name "Blog") (eq $current.Section "blog" "authors")) -}}
            {{- $key := "" -}}
            {{- if .Identifier -}}
              {{- $key = printf "menu.%s" .Identifier -}}
            {{- end -}}
            {{ if .HasChildren -}}
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"{{ if $key }} data-i18n-key="{{ $key }}"{{ end }}>
                  {{ .Name -}}
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-down" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                    <path d="M6 9l6 6l6 -6"></path>
                  </svg>
                </a>
                <ul class="dropdown-menu shadow rounded border-0">
                  {{ range .Children -}}
                  {{- $active = eq .Name $current.Title -}}
                    {{- $childKey := "" -}}
                    {{- if .Identifier -}}
                      {{- $childKey = printf "menu.%s" .Identifier -}}
                    {{- end -}}
                    <li><a class="dropdown-item{{ if $active }} active{{ end }}" href="{{ .URL | absURL }}"{{ if $active }} aria-current="true"{{ end }}{{ if $childKey }} data-i18n-key="{{ $childKey }}"{{ end }}>{{ .Name }}</a></li>
                  {{ end -}}
                </ul>
              </li>
            {{ else -}}
              <li class="nav-item">
                <a class="nav-link{{ if $active }} active{{ end }}" href="{{ .URL | absURL }}"{{ if $active }} aria-current="true"{{ end }}{{ if $key }} data-i18n-key="{{ $key }}"{{ end }}>{{ .Name }}</a>
              </li>
            {{ end -}}
          {{ end -}}
        </ul>
        <div class="facodi-navbar__actions d-flex flex-column flex-sm-row align-items-stretch align-items-lg-center gap-3 ms-lg-auto">
          {{ if gt (len $localeOptions) 0 -}}
          <div class="dropdown facodi-language" data-controller="facodi-language">
            <button class="facodi-language__toggle" type="button" id="facodiLanguageToggle" data-bs-toggle="dropdown" aria-expanded="false" data-i18n-key="nav.language" data-i18n-attr="aria-label" aria-haspopup="true">
              <span class="facodi-language__label" data-i18n-key="nav.language">Idioma</span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="facodiLanguageToggle">
              {{ range $localeOptions -}}
                {{- $code := .code | default .Code -}}
                {{- $label := .label | default .Label -}}
                <li>
                  <button class="dropdown-item" type="button" data-locale-option="{{ $code }}"{{ if eq $code $localeDefault }} aria-current="true"{{ end }}>
                    <span class="facodi-language__option-label">{{ $label }}</span>
                  </button>
                </li>
              {{ end -}}
            </ul>
          </div>
          {{ end -}}
          <button class="facodi-theme-toggle" type="button" data-theme-toggle data-i18n-attr="aria-label" aria-pressed="false" data-theme-label-light="nav.themeLight" data-theme-label-dark="nav.themeDark">
            <span class="visually-hidden" data-theme-text="dark" data-i18n-key="nav.themeDark">Ativar modo escuro</span>
            <span class="visually-hidden" data-theme-text="light" data-i18n-key="nav.themeLight">Ativar modo claro</span>
            <svg class="facodi-theme-toggle__icon facodi-theme-toggle__icon--sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
              <circle cx="12" cy="12" r="4"></circle>
              <path d="M3 12h1"></path>
              <path d="M20 12h1"></path>
              <path d="M12 3v1"></path>
              <path d="M12 20v1"></path>
              <path d="M5.6 5.6l.7 .7"></path>
              <path d="M18.4 18.4l.7 .7"></path>
              <path d="M18.4 5.6l.7 -.7"></path>
              <path d="M5.6 18.4l.7 -.7"></path>
            </svg>
            <svg class="facodi-theme-toggle__icon facodi-theme-toggle__icon--moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
              <path d="M12 3c.132 0 .263 0 .393 .008a7.5 7.5 0 0 0 7.599 12.454a9 9 0 1 1 -7.992 -12.462z"></path>
            </svg>
          </button>
          <a class="facodi-navbar__github" href="https://github.com/Monynha-Softwares/facodi.pt" target="_blank" rel="noopener" data-i18n-attr="aria-label" data-i18n-key="nav.github">
            <span class="visually-hidden" data-i18n-key="nav.github">Visitar reposit√≥rio no GitHub</span>
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" class="facodi-navbar__github-icon">
              <path fill="currentColor" d="M12 0a12 12 0 0 0-3.79 23.4c.6.11.82-.26.82-.58v-2.01c-3.34.73-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.09-.74.08-.73.08-.73 1.2.09 1.84 1.23 1.84 1.23 1.07 1.84 2.8 1.31 3.49 1 .11-.78.42-1.31.76-1.61-2.67-.3-5.48-1.34-5.48-5.95 0-1.31.47-2.38 1.24-3.22-.13-.3-.54-1.52.12-3.17 0 0 1-.32 3.3 1.23a11.3 11.3 0 0 1 6 0c2.3-1.55 3.3-1.23 3.3-1.23.66 1.65.25 2.87.12 3.17.77.84 1.24 1.91 1.24 3.22 0 4.62-2.81 5.65-5.49 5.95.43.37.81 1.1.81 2.22v3.29c0 .32.21.7.82.58A12 12 0 0 0 12 0Z"/>
            </svg>
          </a>
          {{ if site.Params.doks.navBarButton -}}
            <a class="facodi-navbar__cta" href="{{ site.Params.doks.navBarButtonUrl | absURL }}" data-i18n-key="nav.cta">{{ site.Params.doks.navBarButtonText }}</a>
          {{ end -}}
        </div>
      </div>
    </div>

  </div>
</header>
{{ if site.Params.doks.navbarSticky -}}
</div>
{{ end -}}

<!-- Search modal -->
{{ if site.Params.doks.flexSearch -}}
{{ partial "header/search-modal" . }}
{{ end -}}


