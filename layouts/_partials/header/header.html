{{ if site.Params.doks.alert -}}
  {{ partial "header/alert.html" . }}
{{ end -}}

{{ if site.Params.doks.navbarSticky -}}
<div class="sticky-top">
{{ end -}}

{{ if site.Params.doks.headerBar -}}
<div class="header-bar"></div>
{{ end -}}

<header class="navbar navbar-expand-lg facodi-navbar">
  {{ with site.Params.doks.containerBreakpoint -}}
    <div class="container-{{ . }} facodi-navbar__inner">
  {{ else -}}
    <div class="container facodi-navbar__inner">
  {{ end -}}

    <!-- Site title -->
    <a class="navbar-brand facodi-navbar__brand" href="{{ relLangURL "" }}">{{ .Site.Title }}</a>

    <!-- Main navigation button -->
    <button class="facodi-navbar__toggle d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavMain" aria-controls="offcanvasNavMain" aria-label="{{ partial "utils/translate" (dict "Key" "navbar.menuToggle") }}">
      <span class="visually-hidden">{{ partial "utils/translate" (dict "Key" "navbar.menuToggleSr") }}</span>
      <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <line x1="4" y1="8" x2="20" y2="8"></line>
        <line x1="4" y1="16" x2="20" y2="16"></line>
      </svg>
    </button>

    <!-- Main navigation -->
    <div class="offcanvas offcanvas-end h-auto" tabindex="-1" id="offcanvasNavMain" aria-labelledby="offcanvasNavMainLabel">
      {{ if site.Params.doks.headerBar -}}
        <div class="header-bar d-lg-none"></div>
      {{ end -}}
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasNavMainLabel">{{ site.Title }}</h5>
        <button type="button" class="btn btn-link nav-link p-0 ms-auto" data-bs-dismiss="offcanvas" aria-label="{{ partial "utils/translate" (dict "Key" "navbar.offcanvasClose") }}">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M18 6l-12 12"></path>
            <path d="M6 6l12 12"></path>
         </svg>
        </button>
      </div>
      <!--
      <div class="offcanvas-header">
        <h5 class="offcanvas-title fw-bold" id="offcanvasNavMainLabel">{{ .Site.Params.Title }}</h5>
        <button class="btn btn-link nav-link ms-auto" type="button" data-bs-dismiss="offcanvas" aria-label="Close menu">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M18 6l-12 12"></path>
            <path d="M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      -->
      <div class="offcanvas-body facodi-navbar__body d-flex flex-column flex-lg-row align-items-lg-center gap-lg-4">
        <ul class="navbar-nav facodi-navbar__links flex-column flex-lg-row align-items-lg-center gap-2 gap-lg-4 mb-4 mb-lg-0">
          {{- $current := . -}}
          {{- $section := $current.Section -}}
          {{ range .Site.Menus.main -}}
            {{- $active := or ($current.IsMenuCurrent "main" .) ($current.HasMenuCurrent "main" .) -}}
            {{- $active = or $active (eq .Name $current.Title) -}}
            {{- $active = or $active (eq .Name ($section | humanize)) -}}
            {{- $active = or $active (and (eq .Name "Blog") (eq $current.Section "blog" "authors")) -}}
            {{ if .HasChildren -}}
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  {{ .Name -}}
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-down" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                    <path d="M6 9l6 6l6 -6"></path>
                  </svg>
                </a>
                <ul class="dropdown-menu shadow rounded border-0">
                  {{ range .Children -}}
                  {{- $active = eq .Name $current.Title -}}
                    <li><a class="dropdown-item{{ if $active }} active{{ end }}" href="{{ .URL | relLangURL }}"{{ if $active }} aria-current="true"{{ end }}>{{ .Name }}</a></li>
                  {{ end -}}
                </ul>
              </li>
            {{ else -}}
              <li class="nav-item">
                <a class="nav-link{{ if $active }} active{{ end }}" href="{{ .URL | relLangURL }}"{{ if $active }} aria-current="true"{{ end }}>{{ .Name }}</a>
              </li>
            {{ end -}}
          {{ end -}}
        </ul>
        <div class="facodi-navbar__actions d-flex flex-column flex-sm-row align-items-stretch align-items-lg-center gap-3 ms-lg-auto">
          {{- $languages := site.Languages -}}
          {{- if gt (len $languages) 1 -}}
            {{- $defaultLang := "" -}}
            {{- range $languages -}}
              {{- if eq .Weight 1 -}}
                {{- $defaultLang = .Lang -}}
              {{- end -}}
            {{- end -}}
            {{- if eq $defaultLang "" -}}
              {{- $defaultLang = site.Language.Lang -}}
            {{- end -}}
            {{- $rel := .RelPermalink -}}
            {{- $scratch := newScratch -}}
            {{- $scratch.Set "basePath" $rel -}}
            {{- range $languages -}}
              {{- $langPrefix := printf "/%s/" .Lang -}}
              {{- if eq $rel $langPrefix -}}
                {{- $scratch.Set "basePath" "/" -}}
              {{- else if strings.HasPrefix $rel $langPrefix -}}
                {{- $scratch.Set "basePath" (printf "/%s" (strings.TrimPrefix $langPrefix $rel)) -}}
              {{- end -}}
              {{- $langShort := printf "/%s" .Lang -}}
              {{- if eq $rel $langShort -}}
                {{- $scratch.Set "basePath" "/" -}}
              {{- end -}}
            {{- end -}}
            {{- $basePath := $scratch.Get "basePath" | default "/" -}}
            <details class="facodi-language-switcher" data-facodi-language-switcher>
              <summary class="facodi-language-switcher__summary" aria-label="{{ partial "utils/translate" (dict "Key" "navbar.languageSelect") }}">
                <span class="facodi-language-switcher__label">{{ partial "utils/translate" (dict "Key" "navbar.languageSummary" "Vars" (dict "Language" .Site.Language.LanguageName)) }}</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="facodi-language-switcher__icon" width="16" height="16" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                  <path d="M6 9l6 6l6 -6"></path>
                </svg>
              </summary>
              <ul class="facodi-language-switcher__list">
                {{- range $languages -}}
                  {{- $lang := . -}}
                  {{- $isCurrent := eq $lang.Lang $.Site.Language.Lang -}}
                  {{- $href := cond (eq $lang.Lang $defaultLang) $basePath (cond (eq $basePath "/") (printf "/%s/" $lang.Lang) (printf "/%s%s" $lang.Lang $basePath)) -}}
                  <li>
                    <a class="facodi-language-switcher__link{{ if $isCurrent }} active{{ end }}" href="{{ $href }}" lang="{{ $lang.Lang }}" hreflang="{{ $lang.Lang }}"{{ if $isCurrent }} aria-current="true"{{ end }}>
                      {{ $lang.LanguageName }}
                    </a>
                  </li>
                {{- end -}}
              </ul>
            </details>
          {{- end -}}
          <button type="button" class="facodi-theme-toggle" data-facodi-theme-toggle aria-label="{{ partial "utils/translate" (dict "Key" "navbar.themeToggle") }}" data-theme-dark-label="{{ partial "utils/translate" (dict "Key" "navbar.themeToggleDark") }}" data-theme-light-label="{{ partial "utils/translate" (dict "Key" "navbar.themeToggleLight") }}">
            <span class="facodi-theme-toggle__icon facodi-theme-toggle__icon--sun" aria-hidden="true">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-sun" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.75" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M12 4v2"></path>
                <path d="M12 18v2"></path>
                <path d="M4 12h2"></path>
                <path d="M18 12h2"></path>
                <path d="M5.6 5.6l1.4 1.4"></path>
                <path d="M17 17l1.4 1.4"></path>
                <path d="M5.6 18.4l1.4 -1.4"></path>
                <path d="M17 7l1.4 -1.4"></path>
                <path d="M12 8a4 4 0 1 0 0 8a4 4 0 0 0 0 -8"></path>
              </svg>
            </span>
            <span class="facodi-theme-toggle__icon facodi-theme-toggle__icon--moon" aria-hidden="true">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-moon" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.75" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <path d="M12 3c.132 0 .263 .003 .393 .01a7 7 0 0 0 6.594 10.99a9 9 0 1 1 -6.987 -11"></path>
              </svg>
            </span>
            <span class="visually-hidden" data-facodi-theme-toggle-label>{{ partial "utils/translate" (dict "Key" "navbar.themeToggleDark") }}</span>
          </button>
          {{ with site.Params.facodi.githubUrl -}}
            <a class="facodi-github-link" href="{{ . }}" target="_blank" rel="noopener" aria-label="{{ partial "utils/translate" (dict "Key" "navbar.githubLabel") }}">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M12 0a12 12 0 0 0-3.79 23.39c.6.11.82-.26.82-.58v-2.02c-3.34.73-4.04-1.61-4.04-1.61-.55-1.41-1.35-1.79-1.35-1.79-1.1-.75.08-.73.08-.73 1.22.09 1.86 1.25 1.86 1.25 1.08 1.85 2.83 1.32 3.52 1.01.11-.79.42-1.32.76-1.62-2.67-.3-5.47-1.34-5.47-5.96 0-1.32.47-2.4 1.25-3.24-.13-.31-.54-1.54.12-3.21 0 0 1.01-.32 3.3 1.23a11.4 11.4 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.66 1.67.25 2.9.12 3.21.78.84 1.24 1.92 1.24 3.24 0 4.63-2.81 5.66-5.49 5.96.43.37.81 1.1.81 2.22v3.29c0 .32.22.7.82.58A12 12 0 0 0 12 0" />
              </svg>
            </a>
          {{ end -}}
          {{ if site.Params.doks.navBarButton -}}
            <a class="facodi-navbar__cta" href="{{ site.Params.doks.navBarButtonUrl | relLangURL }}">{{ partial "utils/translate" (dict "Key" "navbar.cta") }}</a>
          {{ end -}}
        </div>
      </div>
    </div>

  </div>
</header>
{{ if site.Params.doks.navbarSticky -}}
</div>
{{ end -}}

<!-- Search modal -->
{{ if site.Params.doks.flexSearch -}}
{{ partial "header/search-modal" . }}
{{ end -}}


