{{ if site.Params.doks.alert -}}
  {{ partial "header/alert.html" . }}
{{ end -}}

{{ if site.Params.doks.navbarSticky -}}
<div class="sticky-top">
{{ end -}}

{{ if site.Params.doks.headerBar -}}
<div class="header-bar"></div>
{{ end -}}

<header class="navbar navbar-expand-lg facodi-navbar">
  {{ with site.Params.doks.containerBreakpoint -}}
    <div class="container-{{ . }} facodi-navbar__inner">
  {{ else -}}
    <div class="container facodi-navbar__inner">
  {{ end -}}

    <!-- Site title -->
    <a class="navbar-brand facodi-navbar__brand" href="{{ relLangURL "" }}">{{ .Site.Title }}</a>

    <!-- Main navigation button -->
    <button
      class="facodi-navbar__toggle d-lg-none"
      type="button"
      data-bs-toggle="offcanvas"
      data-bs-target="#offcanvasNavMain"
      aria-controls="offcanvasNavMain"
      aria-label="Abrir menu principal"
      data-i18n="nav.menuToggleLabel"
      data-i18n-attr="aria-label"
    >
      <span class="visually-hidden" data-i18n="nav.menuToggle">Abrir menu</span>
      <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <line x1="4" y1="8" x2="20" y2="8"></line>
        <line x1="4" y1="16" x2="20" y2="16"></line>
      </svg>
    </button>

    <!-- Main navigation -->
    <div class="offcanvas offcanvas-end h-auto" tabindex="-1" id="offcanvasNavMain" aria-labelledby="offcanvasNavMainLabel">
      {{ if site.Params.doks.headerBar -}}
        <div class="header-bar d-lg-none"></div>
      {{ end -}}
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasNavMainLabel">{{ site.Title }}</h5>
        <button
          type="button"
          class="btn btn-link nav-link p-0 ms-auto"
          data-bs-dismiss="offcanvas"
          aria-label="Fechar"
          data-i18n="nav.close"
          data-i18n-attr="aria-label"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M18 6l-12 12"></path>
            <path d="M6 6l12 12"></path>
         </svg>
        </button>
      </div>
      <!--
      <div class="offcanvas-header">
        <h5 class="offcanvas-title fw-bold" id="offcanvasNavMainLabel">{{ .Site.Params.Title }}</h5>
        <button class="btn btn-link nav-link ms-auto" type="button" data-bs-dismiss="offcanvas" aria-label="Close menu">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M18 6l-12 12"></path>
            <path d="M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      -->
      <div class="offcanvas-body facodi-navbar__body d-flex flex-column flex-lg-row align-items-lg-center gap-lg-4">
        <ul class="navbar-nav facodi-navbar__links flex-column flex-lg-row align-items-lg-center gap-2 gap-lg-4 mb-4 mb-lg-0">
          {{- $current := . -}}
          {{- $section := $current.Section -}}
          {{ range .Site.Menus.main -}}
            {{- $active := or ($current.IsMenuCurrent "main" .) ($current.HasMenuCurrent "main" .) -}}
            {{- $active = or $active (eq .Name $current.Title) -}}
            {{- $active = or $active (eq .Name ($section | humanize)) -}}
            {{- $active = or $active (and (eq .Name "Blog") (eq $current.Section "blog" "authors")) -}}
            {{ if .HasChildren -}}
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                  {{ with .Identifier }}data-i18n="nav.{{ . }}"{{ end }}
                >
                  {{ .Name -}}
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-down" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                    <path d="M6 9l6 6l6 -6"></path>
                  </svg>
                </a>
                <ul class="dropdown-menu shadow rounded border-0">
                  {{ range .Children -}}
                  {{- $active = eq .Name $current.Title -}}
                    <li>
                      <a
                        class="dropdown-item{{ if $active }} active{{ end }}"
                        href="{{ .URL | absURL }}"
                        {{ if $active }}aria-current="true"{{ end }}
                        {{ with .Identifier }}data-i18n="nav.{{ . }}"{{ end }}
                      >{{ .Name }}</a>
                    </li>
                  {{ end -}}
                </ul>
              </li>
            {{ else -}}
              <li class="nav-item">
                <a
                  class="nav-link{{ if $active }} active{{ end }}"
                  href="{{ .URL | absURL }}"
                  {{ if $active }}aria-current="true"{{ end }}
                  {{ with .Identifier }}data-i18n="nav.{{ . }}"{{ end }}
                >{{ .Name }}</a>
              </li>
            {{ end -}}
          {{ end -}}
        </ul>
        <div class="facodi-navbar__actions d-flex flex-column flex-sm-row align-items-stretch align-items-lg-center gap-3 ms-lg-auto">
          <button
            type="button"
            class="facodi-navbar__theme"
            data-theme-toggle
            aria-label="Alternar modo de cor"
            data-i18n="nav.toggleTheme"
            data-i18n-attr="aria-label"
          >
            <span class="facodi-navbar__theme-icon" aria-hidden="true"></span>
            <span class="visually-hidden" data-i18n="nav.toggleThemeLabel">Alternar modo de cor</span>
          </button>
          <a
            class="facodi-navbar__github"
            href="https://github.com/Monynha-Softwares/facodi.pt"
            target="_blank"
            rel="noopener"
            aria-label="Abrir repositÃ³rio no GitHub"
            data-i18n="nav.github"
            data-i18n-attr="aria-label"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="22" height="22" role="img" aria-hidden="true">
              <path
                fill="currentColor"
                d="M12 .5a11.5 11.5 0 0 0-3.64 22.41c.58.11.79-.25.79-.56l-.02-2.02c-3.23.7-3.91-1.56-3.91-1.56-.53-1.35-1.3-1.71-1.3-1.71-1.06-.74.08-.73.08-.73 1.17.08 1.79 1.21 1.79 1.21 1.04 1.78 2.74 1.26 3.41.96.1-.76.41-1.27.75-1.56-2.57-.29-5.28-1.29-5.28-5.73 0-1.27.46-2.31 1.21-3.13-.12-.3-.53-1.5.12-3.13 0 0 .97-.31 3.18 1.19a11.1 11.1 0 0 1 5.79 0c2.2-1.5 3.17-1.19 3.17-1.19.65 1.63.24 2.83.12 3.13.76.82 1.21 1.86 1.21 3.13 0 4.45-2.71 5.44-5.29 5.72.42.36.8 1.08.8 2.18l-.01 3.23c0 .31.21.67.8.56A11.5 11.5 0 0 0 12 .5Z"
              />
            </svg>
          </a>
          <span
            class="visually-hidden"
            id="facodi-language-config"
            data-supported-languages='{{ site.Params.facodi.supportedLanguages | default (slice "pt") | jsonify }}'
            data-default-language="{{ site.Params.facodi.defaultLanguage | default "pt" }}"
          >
            {{ with site.Params.facodi.defaultLanguage }}{{ . }}{{ end }}
          </span>
          {{ if site.Params.doks.navBarButton -}}
            <a
              class="facodi-navbar__cta"
              href="{{ site.Params.doks.navBarButtonUrl | absURL }}"
              data-i18n="nav.primaryCta"
            >{{ site.Params.doks.navBarButtonText }}</a>
          {{ end -}}
        </div>
      </div>
    </div>

  </div>
</header>
{{ if site.Params.doks.navbarSticky -}}
</div>
{{ end -}}

<!-- Search modal -->
{{ if site.Params.doks.flexSearch -}}
{{ partial "header/search-modal" . }}
{{ end -}}


