{{ define "main" }}
  {{ $scratch := newScratch }}
  {{ $scratch.Set "coursesCount" 0 }}
  {{ $scratch.Set "ucCount" 0 }}
  {{ with site.GetPage "section" "courses" }}
    {{ range .Sections }}
      {{ if .Params.code }}
        {{ $scratch.Add "coursesCount" 1 }}
        {{ with .Params.ucs }}
          {{ $scratch.Add "ucCount" (len .) }}
        {{ end }}
      {{ end }}
    {{ end }}
  {{ end }}

  <section class="facodi-hero">
    <div class="container-lg">
      <div class="facodi-hero__grid">
        <div class="facodi-hero__content">
          <div class="facodi-hero__intro">
            <span class="facodi-pill facodi-pill--brand facodi-hero__badge" data-i18n="home.heroBadge">{{ partial "facodi/i18n.html" (dict "key" "home.heroBadge") }}</span>
            <h1 class="facodi-hero__title" data-i18n="home.heroTitle">{{ partial "facodi/i18n.html" (dict "key" "home.heroTitle") }}</h1>
            <p class="facodi-hero__description">{{ .Params.lead | safeHTML }}</p>
          </div>
          <div class="facodi-hero__actions">
            <a class="facodi-hero__cta" href="/courses/" role="button" data-i18n="nav.viewTracks">{{ partial "facodi/i18n.html" (dict "key" "nav.viewTracks") }}</a>
            <a class="facodi-hero__secondary" href="https://monynha.com" target="_blank" rel="noopener" data-i18n="home.ecosystemCta">{{ partial "facodi/i18n.html" (dict "key" "home.ecosystemCta") }}</a>
          </div>
          <div class="facodi-hero__meta">
            <div class="facodi-hero__meta-item">
              <span class="facodi-pill facodi-pill--success" data-i18n="home.heroMetaOpenTitle">{{ partial "facodi/i18n.html" (dict "key" "home.heroMetaOpenTitle") }}</span>
              <p data-i18n="home.heroMetaOpenDescription">{{ partial "facodi/i18n.html" (dict "key" "home.heroMetaOpenDescription") }}</p>
            </div>
            <div class="facodi-hero__meta-item">
              <span class="facodi-pill facodi-pill--outline" data-i18n="home.heroMetaCommunityTitle">{{ partial "facodi/i18n.html" (dict "key" "home.heroMetaCommunityTitle") }}</span>
              <p data-i18n="home.heroMetaCommunityDescription">{{ partial "facodi/i18n.html" (dict "key" "home.heroMetaCommunityDescription") }}</p>
            </div>
          </div>
        </div>
        <div class="facodi-hero__card">
          <span class="facodi-hero__card-label" data-i18n="home.heroStatsLabel">{{ partial "facodi/i18n.html" (dict "key" "home.heroStatsLabel") }}</span>
          <ul class="facodi-hero__stat-list">
            {{ $coursesCount := int ($scratch.Get "coursesCount") }}
            {{ $ucCount := int ($scratch.Get "ucCount") }}
            <li
              data-i18n="home.heroStatsCourses"
              data-i18n-html="true"
              data-i18n-vars='{{ dict "Count" (printf "<strong>%d</strong>" $coursesCount) | jsonify }}'
            >
              {{ partial "facodi/i18n.html" (dict "key" "home.heroStatsCourses" "vars" (dict "Count" (printf "<strong>%d</strong>" $coursesCount))) | safeHTML }}
            </li>
            <li
              data-i18n="home.heroStatsUcs"
              data-i18n-html="true"
              data-i18n-vars='{{ dict "Count" (printf "<strong>%d</strong>" $ucCount) | jsonify }}'
            >
              {{ partial "facodi/i18n.html" (dict "key" "home.heroStatsUcs" "vars" (dict "Count" (printf "<strong>%d</strong>" $ucCount))) | safeHTML }}
            </li>
            <li data-i18n="home.heroStatsCollaborative">{{ partial "facodi/i18n.html" (dict "key" "home.heroStatsCollaborative") }}</li>
          </ul>
          <p class="facodi-hero__card-foot" data-i18n="home.heroStatsFoot" data-i18n-html="true">{{ partial "facodi/i18n.html" (dict "key" "home.heroStatsFoot") | safeHTML }}</p>
        </div>
      </div>
    </div>
  </section>

  {{ with .Content }}
  <section class="facodi-section facodi-section--intro">
    <div class="container-lg">
      <div class="facodi-section__body">
        {{ . | safeHTML }}
      </div>
    </div>
  </section>
  {{ end }}

  {{ $features := slice
    (dict "icon" "üó∫Ô∏è" "titleKey" "home.feature.map.title" "descriptionKey" "home.feature.map.description")
    (dict "icon" "üéß" "titleKey" "home.feature.playlists.title" "descriptionKey" "home.feature.playlists.description")
    (dict "icon" "‚úÖ" "titleKey" "home.feature.progress.title" "descriptionKey" "home.feature.progress.description")
    (dict "icon" "üåà" "titleKey" "home.feature.curadoria.title" "descriptionKey" "home.feature.curadoria.description")
  }}
  <section class="facodi-section facodi-section--features">
    <div class="container-lg section-wrap">
      <div class="facodi-section__header section-header text-center">
        <span class="facodi-section__eyebrow" data-i18n="home.featuresEyebrow">{{ partial "facodi/i18n.html" (dict "key" "home.featuresEyebrow") }}</span>
        <h2 class="section-title facodi-section__title" data-i18n="home.featuresTitle">{{ partial "facodi/i18n.html" (dict "key" "home.featuresTitle") }}</h2>
        <p class="facodi-section__subtitle" data-i18n="home.featuresSubtitle">{{ partial "facodi/i18n.html" (dict "key" "home.featuresSubtitle") }}</p>
      </div>
      <div class="facodi-grid facodi-grid--features">
        {{ range $features }}
        <div class="facodi-feature-card">
          <span class="facodi-feature-card__icon">{{ .icon }}</span>
          <h3 class="facodi-feature-card__title" data-i18n="{{ .titleKey }}">{{ partial "facodi/i18n.html" (dict "key" .titleKey) }}</h3>
          <p class="facodi-feature-card__description" data-i18n="{{ .descriptionKey }}">{{ partial "facodi/i18n.html" (dict "key" .descriptionKey) }}</p>
        </div>
        {{ end }}
      </div>
    </div>
  </section>

  {{ with site.GetPage "section" "courses" }}
  <section class="facodi-section facodi-section--courses">
    <div class="container-lg section-wrap">
      <div class="facodi-section__header facodi-section__header--split section-header">
        <div class="section-header section-header--flush">
          <span class="facodi-section__eyebrow" data-i18n="home.coursesEyebrow">{{ partial "facodi/i18n.html" (dict "key" "home.coursesEyebrow") }}</span>
          <h2 class="section-title facodi-section__title" data-i18n="home.coursesTitle">{{ partial "facodi/i18n.html" (dict "key" "home.coursesTitle") }}</h2>
          <p class="facodi-section__subtitle" data-i18n="home.coursesSubtitle">{{ partial "facodi/i18n.html" (dict "key" "home.coursesSubtitle") }}</p>
        </div>
        <div class="facodi-section__cta">
          <a class="facodi-link facodi-link--cta" href="/courses/" data-i18n="home.viewAllCourses">{{ partial "facodi/i18n.html" (dict "key" "home.viewAllCourses") }}</a>
        </div>
      </div>
      <div class="facodi-grid facodi-grid--courses">
        {{ range .Sections }}
          {{ if .Params.code }}
          <article class="facodi-course-card">
            <div class="facodi-course-card__body">
              {{ with .Params.plan_version }}
              <span
                class="facodi-pill facodi-pill--outline"
                data-i18n="common.planLabel"
                data-i18n-vars='{{ dict "Value" . | jsonify }}'
              >
                {{ partial "facodi/i18n.html" (dict "key" "common.planLabel" "vars" (dict "Value" .)) }}
              </span>
              {{ end }}
              <h3 class="facodi-course-card__title"><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
              {{ with .Params.summary }}
              <p class="facodi-course-card__summary">{{ . }}</p>
              {{ end }}
            </div>
            <div class="facodi-course-card__meta">
              <div class="facodi-course-card__stats">
                {{ with .Params.ects_total }}<span><strong>{{ . }}</strong> <span data-i18n="common.ects">{{ partial "facodi/i18n.html" (dict "key" "common.ects") }}</span></span>{{ end }}
                {{ with .Params.duration_semesters }}<span><strong>{{ . }}</strong> <span data-i18n="common.durationSuffix">{{ partial "facodi/i18n.html" (dict "key" "common.durationSuffix") }}</span></span>{{ end }}
                {{ with .Params.code }}<span><span data-i18n="common.code">{{ partial "facodi/i18n.html" (dict "key" "common.code") }}</span> {{ . }}</span>{{ end }}
              </div>
              {{ with .Params.ucs }}
              {{ $ucTotal := len . }}
              <p
                class="facodi-course-card__foot"
                data-i18n="home.courseCardFoot"
                data-i18n-html="true"
                data-i18n-vars='{{ dict "Count" (printf "<strong>%d</strong>" $ucTotal) | jsonify }}'
              >
                {{ partial "facodi/i18n.html" (dict "key" "home.courseCardFoot" "vars" (dict "Count" (printf "<strong>%d</strong>" $ucTotal))) | safeHTML }}
              </p>
              {{ end }}
            </div>
          </article>
          {{ end }}
        {{ end }}
      </div>
    </div>
  </section>
  {{ end }}

  <section class="facodi-section facodi-section--journey">
    <div class="container-lg section-wrap">
      <div class="facodi-section__header facodi-section__header--split section-header">
        <div class="section-header section-header--flush">
          <span class="facodi-section__eyebrow facodi-section__eyebrow--light" data-i18n="home.journeyEyebrow">{{ partial "facodi/i18n.html" (dict "key" "home.journeyEyebrow") }}</span>
          <h2 class="section-title facodi-section__title" data-i18n="home.journeyTitle">{{ partial "facodi/i18n.html" (dict "key" "home.journeyTitle") }}</h2>
          <p class="facodi-section__subtitle" data-i18n="home.journeySubtitle">{{ partial "facodi/i18n.html" (dict "key" "home.journeySubtitle") }}</p>
        </div>
      </div>
      <ol class="facodi-journey__list">
        <li data-i18n="home.journeyStep1">{{ partial "facodi/i18n.html" (dict "key" "home.journeyStep1") }}</li>
        <li data-i18n="home.journeyStep2">{{ partial "facodi/i18n.html" (dict "key" "home.journeyStep2") }}</li>
        <li data-i18n="home.journeyStep3">{{ partial "facodi/i18n.html" (dict "key" "home.journeyStep3") }}</li>
      </ol>
    </div>
  </section>
{{ end }}

{{ define "sidebar-prefooter" }}
<section class="facodi-section facodi-section--manifesto">
  <div class="container-lg section-wrap">
  <div class="facodi-manifesto">
      <span class="facodi-section__eyebrow" data-i18n="home.manifestEyebrow">{{ partial "facodi/i18n.html" (dict "key" "home.manifestEyebrow") }}</span>
      <h2 class="section-title facodi-manifesto__title" data-i18n="home.manifestTitle">{{ partial "facodi/i18n.html" (dict "key" "home.manifestTitle") }}</h2>
      <p class="facodi-manifesto__description" data-i18n="home.manifestDescription">{{ partial "facodi/i18n.html" (dict "key" "home.manifestDescription") }}</p>
      <a class="facodi-link facodi-link--cta" href="https://monynha.com" target="_blank" rel="noopener" data-i18n="home.readManifesto">{{ partial "facodi/i18n.html" (dict "key" "home.readManifesto") }}</a>
    </div>
  </div>
</section>
{{ end }}

{{ define "sidebar-footer" }}
<section class="facodi-section facodi-section--cta">
  <div class="container-lg section-wrap">
    <div class="facodi-cta">
      <h2 class="section-title facodi-cta__title" data-i18n="home.ctaTitle">{{ partial "facodi/i18n.html" (dict "key" "home.ctaTitle") }}</h2>
      <p class="facodi-cta__description" data-i18n="home.ctaDescription">{{ partial "facodi/i18n.html" (dict "key" "home.ctaDescription") }}</p>
      <div class="facodi-cta__actions">
        <a class="facodi-hero__cta" href="/courses/" data-i18n="home.viewCurricula">{{ partial "facodi/i18n.html" (dict "key" "home.viewCurricula") }}</a>
        <a class="facodi-hero__secondary" href="https://monynha.com" target="_blank" rel="noopener" data-i18n="home.contactMonynha">{{ partial "facodi/i18n.html" (dict "key" "home.contactMonynha") }}</a>
      </div>
    </div>
  </div>
</section>
{{ end }}
