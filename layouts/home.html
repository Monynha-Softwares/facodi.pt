{{ define "main" }}
  {{ $scratch := newScratch }}
  {{ $scratch.Set "coursesCount" 0 }}
  {{ $scratch.Set "ucCount" 0 }}
  {{ with site.GetPage "section" "courses" }}
    {{ range .Sections }}
      {{ if .Params.code }}
        {{ $scratch.Add "coursesCount" 1 }}
        {{ with .Params.ucs }}
          {{ $scratch.Add "ucCount" (len .) }}
        {{ end }}
      {{ end }}
    {{ end }}
  {{ end }}
  <section class="section container-fluid mt-n3 py-5 py-lg-5">
    <div class="row align-items-center justify-content-center g-5">
      <div class="col-lg-6 col-xl-5 text-center text-lg-start">
        <span class="badge rounded-pill bg-primary text-uppercase mb-3">Faculdade Comunit√°ria Digital</span>
        <h1 class="display-5 fw-bold mb-4">Curr√≠culos oficiais + playlists abertas para estudar do seu jeito</h1>
        <p class="lead text-muted mb-4">{{ .Params.lead | safeHTML }}</p>
        <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center justify-content-lg-start mb-4">
          <a class="btn btn-primary btn-lg rounded-pill px-4" href="/courses/" role="button">Explorar mapa curricular</a>
          <a class="btn btn-outline-primary btn-lg rounded-pill px-4" href="https://monynha.com" target="_blank" rel="noopener">Visite o ecossistema Monynha</a>
        </div>
        <div class="d-flex flex-column flex-lg-row gap-3 align-items-center align-items-lg-start text-muted small">
          <div class="d-flex align-items-center gap-2">
            <span class="badge bg-success text-white rounded-pill">Gratuito</span>
            <span>Conte√∫do aberto, sem travas ou mensalidades.</span>
          </div>
          <div class="d-flex align-items-center gap-2">
            <span class="badge bg-light text-dark border rounded-pill">Comunidade</span>
            <span>Curadoria coletiva com transpar√™ncia e afeto Monynha.</span>
          </div>
        </div>
      </div>
      <div class="col-lg-5 col-xl-5">
        <div class="card shadow-sm border-0 h-100">
          <div class="card-body p-4 p-lg-5">
            <p class="text-uppercase text-muted fw-semibold mb-3">Nosso universo comunit√°rio</p>
            <ul class="list-unstyled fs-5 mb-4">
              <li class="mb-2"><strong>{{ $scratch.Get "coursesCount" }}</strong> cursos oficiais organizados</li>
              <li class="mb-2"><strong>{{ $scratch.Get "ucCount" }}</strong> unidades curriculares com conte√∫do aberto</li>
              <li>Playlists, t√≥picos e materiais p√∫blicos conectados para voc√™ estudar sem pressa.</li>
            </ul>
            <p class="mb-0 text-muted">Constru√≠do pela <a class="text-decoration-none" href="https://monynha.com" target="_blank" rel="noopener">Monynha Softwares</a> no Brasil para fortalecer a educa√ß√£o superior gratuita e diversa.</p>
          </div>
        </div>
      </div>
    </div>
  </section>
  {{ with .Content }}
  <section class="section section-sm pt-0">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-10 col-xl-8 lead text-muted">
          {{ . | safeHTML }}
        </div>
      </div>
    </div>
  </section>
  {{ end }}
  {{ $features := slice
    (dict "icon" "üóÇÔ∏è" "title" "Curr√≠culos oficiais" "description" "Planos de ensino atualizados com metadados, vers√µes e refer√™ncias institucionais.")
    (dict "icon" "üéß" "title" "Playlists integradas" "description" "V√≠deos, podcasts e leituras p√∫blicas contextualizados para cada m√≥dulo.")
    (dict "icon" "‚úÖ" "title" "Progresso pessoal" "description" "Marque m√≥dulos conclu√≠dos e acompanhe sua jornada de estudo comunit√°ria.")
    (dict "icon" "üåà" "title" "Comunidade diversa" "description" "Curadoria plural feita por estudantes, educadoras e volunt√°rias da FACODI.")
  }}
  <section class="section section-md bg-light">
    <div class="container">
      <div class="row justify-content-center text-center mb-5">
        <div class="col-lg-8">
          <h2 class="h3 fw-bold">Uma experi√™ncia digital aberta, afetiva e rastre√°vel</h2>
          <p class="text-muted">Cada funcionalidade aproxima curr√≠culos oficiais das pessoas que aprendem junto com a comunidade FACODI.</p>
        </div>
      </div>
      <div class="row row-cols-1 row-cols-md-2 row-cols-xl-4 g-4">
        {{ range $features }}
        <div class="col">
          <div class="card h-100 border-0 shadow-sm">
            <div class="card-body p-4">
              <span class="d-inline-flex justify-content-center align-items-center rounded-circle bg-primary bg-opacity-10 text-primary fs-3 mb-3" style="width:3rem;height:3rem;">{{ .icon }}</span>
              <h3 class="h5 fw-semibold">{{ .title }}</h3>
              <p class="text-muted mb-0">{{ .description }}</p>
            </div>
          </div>
        </div>
        {{ end }}
      </div>
    </div>
  </section>
  {{ with site.GetPage "section" "courses" }}
  <section class="section section-md">
    <div class="container">
      <div class="row justify-content-between align-items-end mb-4">
        <div class="col-lg-8">
          <h2 class="h3 fw-bold">Cursos comunit√°rios em destaque</h2>
          <p class="text-muted mb-0">Grades oficiais com resultados de aprendizagem, playlists abertas e caminhos colaborativos para estudar sem burocracia.</p>
        </div>
        <div class="col-lg-4 text-lg-end mt-3 mt-lg-0">
          <a class="btn btn-outline-primary rounded-pill" href="/courses/">Ver todos os cursos</a>
        </div>
      </div>
      <div class="row row-cols-1 row-cols-lg-2 g-4">
        {{ range .Sections }}
          {{ if .Params.code }}
          <div class="col">
            <div class="card h-100 shadow-sm border-0">
              <div class="card-body p-4">
                {{ with .Params.plan_version }}
                <span class="badge bg-secondary text-uppercase mb-3">Vers√£o do plano {{ . }}</span>
                {{ end }}
                <h3 class="h4"><a class="stretched-link text-decoration-none" href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
                {{ with .Params.summary }}
                <p class="text-muted">{{ . }}</p>
                {{ end }}
                <div class="d-flex flex-wrap gap-3 text-muted small">
                  {{ with .Params.ects_total }}<span><strong>{{ . }}</strong> ECTS</span>{{ end }}
                  {{ with .Params.duration_semesters }}<span><strong>{{ . }}</strong> semestres</span>{{ end }}
                  {{ with .Params.code }}<span>C√≥digo {{ . }}</span>{{ end }}
                </div>
              </div>
              {{ with .Params.ucs }}
              <div class="card-footer bg-transparent border-0 pt-0 pb-4 px-4">
                <span class="small text-muted">{{ len . }} unidades curriculares com recursos comunit√°rios</span>
              </div>
              {{ end }}
            </div>
          </div>
          {{ end }}
        {{ end }}
      </div>
    </div>
  </section>
  {{ end }}
  <section class="section section-md bg-dark text-white">
    <div class="container">
      <div class="row g-5 align-items-center">
        <div class="col-lg-5">
          <h2 class="h3 fw-bold">Como a FACODI cuida da sua jornada</h2>
          <p class="text-white-50">Do curr√≠culo homologado √† curadoria comunit√°ria, cada etapa √© pensada para democratizar o estudo e celebrar quem aprende fora do padr√£o.</p>
        </div>
        <div class="col-lg-7">
          <ol class="list-group list-group-numbered list-group-flush bg-dark">
            <li class="list-group-item bg-dark text-white-50 px-0">Navegue por cursos e semestres com dados oficiais, vers√µes e contexto institucional.</li>
            <li class="list-group-item bg-dark text-white-50 px-0">Conhe√ßa compet√™ncias, conte√∫dos e t√≥picos conectados a cada unidade curricular.</li>
            <li class="list-group-item bg-dark text-white-50 px-0">Estude com playlists, materiais p√∫blicos e recomenda√ß√µes da comunidade FACODI.</li>
          </ol>
        </div>
      </div>
    </div>
  </section>
{{ end }}

{{ define "sidebar-prefooter" }}
<section class="section container-fluid py-5">
  <div class="row justify-content-center text-center">
    <div class="col-lg-8">
      <p class="text-uppercase text-muted small mb-2">Ecossistema Monynha Softwares</p>
      <h2 class="h4 fw-bold">Tecnologia radicalmente acess√≠vel para educa√ß√£o aberta</h2>
      <p class="text-muted">A Monynha Softwares une c√≥digo, cultura popular e impacto social. O FACODI √© a frente que transforma curr√≠culos oficiais em experi√™ncias digitais inclusivas, com orgulho e rastreabilidade.</p>
      <a class="btn btn-outline-primary rounded-pill px-4" href="https://monynha.com" target="_blank" rel="noopener">Conhe√ßa monynha.com</a>
    </div>
  </div>
</section>
{{ end }}

{{ define "sidebar-footer" }}
<section class="section section-md container-fluid bg-light">
  <div class="row justify-content-center text-center">
    <div class="col-lg-7">
      <h2 class="fw-bold">Bora construir essa faculdade digital juntas?</h2>
      <p class="text-muted">Sugira playlists, indique materiais p√∫blicos ou ajude a revisar curr√≠culos para deixar o FACODI ainda mais potente.</p>
      <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center">
        <a class="btn btn-primary rounded-pill px-4" href="/courses/">Explorar cursos e UCs</a>
        <a class="btn btn-outline-primary rounded-pill px-4" href="https://monynha.com" target="_blank" rel="noopener">Fala tu, Monynha!</a>
      </div>
    </div>
  </div>
</section>
{{ end }}
